(()=>{"use strict";var e={996:(e,t,n)=>{n.r(t)},267:(e,t,n)=>{n.r(t)},858:(e,t,n)=>{n.r(t)}},t={};function n(o){if(t[o])return t[o].exports;var l=t[o]={exports:{}};return e[o](l,l.exports,n),l.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(858),n(996),n(267),document.ready((function(){var e;$untils.isLogin(),$untils.footerTab("run"),$untils.sportTab("run"),$http.get("/sports/exerciseData",{id:window.localStorage.userId-0},(function(e){document.querySelector("#runkm").textContent=e.data.runkm})),e=new BMap.Map("main"),(new BMap.Geolocation).getCurrentPosition((function(t){if(this.getStatus()==BMAP_STATUS_SUCCESS){var n=new BMap.Point(t.point.lng,t.point.lat);e.centerAndZoom(n,12)}else alert("failed"+this.getStatus())}));var t=document.createElement("div");t.classList.add("go"),t.textContent="GO",console.log(t),document.querySelector("#main").appendChild(t);var n=[3,2,1,"GO"],o=document.querySelector(".fall h2"),l=0;document.querySelector(".go").onclick=function(){document.querySelector(".sure").style.display="none",document.querySelector(".pauseBtn").style.display="flex",document.querySelector(".lockBtn").style.display="flex",document.querySelector(".fall").style.display="block",function(){if(!document.querySelector(".mapCard")){var e=document.createElement("div");e.classList.add("arrow","iconfont","iconleftarrow");var t=document.createElement("div");t.classList.add("mapCard"),t.innerHTML='<div class="outrun">户外跑</div>\n        <div class="render">\n            <div class="pace">\n                <h4>配速</h4>\n                <span id="space02">99\'99</span>\n            </div>\n            <div class="unavailable">\n                <h4>用时</h4>\n                <span id="unavailable">99:99:99</span>\n            </div>\n            <div class="distance">\n                <h4>距离(km)</h4>\n                <span id="calorie02">99.99</span>\n            </div>\n        </div>',document.querySelector("#land").appendChild(e),document.querySelector("#land").appendChild(t)}document.querySelector(".arrow").onclick=function(){document.querySelector(".sporting").style.display="block",document.querySelector("#land").style.display="none"}}(),function(){if(!document.querySelector(".theCard")){var e=document.createElement("div");e.classList.add("complete"),e.innerHTML="完成";var t=document.createElement("div");t.classList.add("theCard"),t.innerHTML='<div class="doorrun">\n            <div class="runKm">\n                <h3>户外跑</h3>\n                <p><span id="dist01">99.99</span>公里</p>\n            </div>\n            <div class="day">\n                2020/11/10\n            </div>\n        </div>\n        <div class="Kcards">\n            <div class="Pace">\n                <h3  id="space01">14\'51\'\'</h3>\n                <span>平均配速</span>\n            </div>\n            <div class="unavailable">\n                <h3 id="use">99:99:99</h3>\n                <span>用时</span>\n            </div>\n            <div class="calories">\n                <h3 id="calorie01">3600</h3>\n                <span>千卡</span>\n            </div>\n        </div>',document.querySelector("#land").appendChild(e),document.querySelector("#land").appendChild(t)}document.querySelector(".complete").onclick=function(){var e={id:window.localStorage.getItem("userId")-0,type:1,takeTime:c,miles:a,averagerate:a/c,calorie:u};window.$http.post("/sports/save",e,(function(e){console.log(e),history.go(0)}))}}(),o.textContent=n[0];var e=setInterval((function(){l++,o.textContent=n[l],4===l&&(clearInterval(e),clearInterval(r),e=null,r=null,l=0,document.querySelector(".fall").style.display="none",document.querySelector(".sporting").style.display="block",i())}),1e3)};var r=null,c=0,a=0,d=0,u=0;function i(){clearInterval(r),document.querySelector(".muchTime").textContent=window.$untils.getTimeBySec(c),r=setInterval((function(){c+=1,document.querySelector(".muchTime").textContent=window.$untils.getTimeBySec(c),document.querySelector("#unavailable").textContent=document.querySelector(".muchTime").textContent,document.querySelector("#calorie02").textContent=document.querySelector("#calorie").textContent,document.querySelector("#space02").textContent=document.querySelector("#space").textContent,document.querySelector(".day").textContent=window.$untils.getDate(),(new BMap.Geolocation).getCurrentPosition((function(e){if(this.getStatus()==BMAP_STATUS_SUCCESS){var t=1*e.point.lng+y,n=1*e.point.lat+y;y+=1e-4,p.push({lng:t,lat:n});var o=new BMap.Point(t,n);s.centerAndZoom(o,15),m>0&&function(e,t,n){var o=new BMap.Polyline([new BMap.Point(t.lng,t.lat),new BMap.Point(n.lng,n.lat)],{strokeColor:"red",strokeWeight:6,strokeOpacity:.5});e.addOverlay(o)}(s,p[m-1],p[m]),m++}else alert("failed"+this.getStatus())})),p.length>0&&(a=window.$untils.calcDistance(p[0],p[p.length-1]),d=window.$untils.calcPace(a,c),u=window.$untils.calCalorie(a),document.querySelector("#dist").textContent=a,document.querySelector("#calorie").textContent=u,document.querySelector("#space").textContent=d)}),1e3)}document.querySelector(".pauseBtn").onclick=function(){clearInterval(r),r=null,this.style.display="none",document.querySelector(".lockBtn").style.display="none",document.querySelector(".sure").style.display="flex"},document.querySelector(".goon").onclick=function(){i(),document.querySelector(".sure").style.display="none",document.querySelector(".pauseBtn").style.display="flex",document.querySelector(".lockBtn").style.display="flex"},document.querySelector(".showMap").onclick=function(){document.querySelector(".sporting").style.display="none",document.querySelector("#land").style.display="block",document.querySelector(".complete").style.display="none",document.querySelector(".theCard").style.display="none",document.querySelector(".arrow").style.display="block",document.querySelector(".mapCard").style.display="block"},document.querySelector(".end").onclick=function(){clearInterval(r),r=null,document.querySelector(".sporting").style.display="none",document.querySelector("#land").style.display="block",document.querySelector(".arrow")&&(document.querySelector(".arrow").style.display="none",document.querySelector(".mapCard").style.display="none"),document.querySelector(".complete").style.display="block",document.querySelector(".theCard").style.display="block",document.querySelector("#use").textContent=document.querySelector(".muchTime").textContent,document.querySelector("#dist01").textContent=document.querySelector("#dist").textContent,document.querySelector("#calorie01").textContent=document.querySelector("#calorie").textContent,document.querySelector("#space01").textContent=document.querySelector("#space").textContent};var s=new BMap.Map("land"),y=1e-4,p=[],m=0}))})();