(()=>{"use strict";var e={267:(e,t,u)=>{u.r(t)},873:(e,t,u)=>{u.r(t)}},t={};function u(o){if(t[o])return t[o].exports;var n=t[o]={exports:{}};return e[o](n,n.exports,u),n.exports}u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u(873),u(267),document.ready((function(){var e=new CaptchaMini,t=document.querySelector("#showPhone"),u=document.querySelector("#label"),o=document.querySelector("#tel"),n=document.querySelector("#psd"),l=document.querySelector("#agin"),r=document.querySelector(".icon"),c=document.querySelector("#yzm"),i=document.querySelector("#toast");e.draw(document.querySelector("#captcha1"),(function(e){window.r=e})),r.onclick=function(){history.go(0)},t.onclick=function(){weui.picker([{label:"+86",value:0},{label:"+80",value:1},{label:"+84",value:2},{label:"+87",value:3}],{onConfirm:function(e){u.textContent=e[0].label},title:"区号选择"})},reg.addEventListener("click",(function(){return o.value&&n.value&&l.value&&c.value?/^1[2-9][\d]{9}$/.test(o.value)&&/^\w{6,12}$/.test(n.value)?window.r!==c.value?($untils.weTip("验证码填写错误"),document.querySelector("#captcha1").click(),console.log(window.r),!1):n.value!==l.value?($untils.weTip("请再次确认你的密码"),!1):void $http.post("/users/add",{account:o.value,password:n.value},(function(e){return 1===e.status?($untils.weTip("用户已存在"),document.querySelector("#captcha1").click(),!1):0!==e.status?($untils.weTip("注册失败"),!1):void("none"==i.style.display&&(window.$untils.fadeIn(i,30),setTimeout((function(){window.$untils.fadeOut(i,30),$http.post("/users/login",{account:o.value,password:n.value},(function(e){if(0!==e.status)return $untils.weTip("登录失败"),!1;localStorage.setItem("userId",e.data.user.userId),location.href="./home.html"}))}),800)))})):($untils.weTip("请正确填写手机号或者密码"),!1):($untils.weTip("请填完整"),!1)}))}))})();